# ディレクトリ構成

## srcディレクトリ説明

### domain（ドメイン層）

**責務**: ビジネスルールとエンティティの定義

- ドメインエンティティ（LgtmImageなど）
- リポジトリインターフェース（抽象定義のみ）
- 純粋なビジネスロジック

### usecase（ユースケース層）

**責務**: アプリケーション固有のビジネスロジック

- ユースケースの実装
- ドメインエンティティを組み合わせた処理フロー
- リポジトリインターフェースを使用（実装には依存しない）

### infrastructure（インフラストラクチャ層）

**責務**: 外部依存の具体的な実装

- データベース接続設定
- リポジトリの実装（domain層のインターフェースを実装）
- 外部サービス連携（S3、認証など）
- DBモデル ↔ ドメインエンティティの変換

### presentation（プレゼンテーション層）

**責務**: HTTPリクエスト/レスポンスの処理

- **router/** - FastAPI APIRouterを使ったルーティング定義
- **controller/** - HTTPリクエストを処理するコントローラークラス


### main.py（エントリーポイント）

**責務**: アプリケーションの起動とルーター登録

- FastAPIアプリケーション定義
- APIRouterの登録（`app.include_router()`）
- サーバー起動設定

**重要な設計方針**:
- `main.py`は極力シンプルに保つ
- 個別のルーティング定義は各ルーターファイルで行う

## tests（テスト層）

**責務**: 各層のテストコード

テストディレクトリは`src`と同階層の`tests/`ディレクトリに配置します。

詳細なテスト方針については @tests/TESTING_GUIDE.md を参照してください。

## 依存関係

- **domain層**: 他のどの層にも依存しない（純粋なビジネスロジック）
- **usecase層**: domain層のみに依存
- **infrastructure層**: domain層のみに依存（インターフェースを実装）
- **presentation層**: usecase層、domain層、infrastructure層に依存
